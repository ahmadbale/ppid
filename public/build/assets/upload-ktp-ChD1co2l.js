import{m as l}from"./module.esm-uXcmRlT3.js";window.Alpine=l;document.addEventListener("alpine:init",()=>{l.data("uploadHandler",()=>({dragging:!1,previewUrl:"",errorMessage:"",uploading:!1,uploadProgress:0,handleDrop(e){this.dragging=!1;const i=e.dataTransfer.files;console.log("File yang didrop:",i),this.handleFiles(i)},handleFileSelect(e){const i=e.target.files;this.handleFiles(i)},handleFiles(e){if(e.length>0){const i=e[0];this.validateFile(i)&&(this.previewFile(i),this.uploadFile(i))}},validateFile(e){return["image/jpeg","image/png","image/gif"].includes(e.type)?e.size>2097152?(this.errorMessage="Ukuran file maksimal 2MB",!1):(this.errorMessage="",!0):(this.errorMessage="Harap unggah file gambar (PNG, JPG, atau GIF)",!1)},previewFile(e){const i=new FileReader;i.onload=()=>{this.previewUrl=i.result},i.readAsDataURL(e)},uploadFile(e){this.uploading=!0,this.uploadProgress=0;let i=setInterval(()=>{this.uploadProgress+=10,this.uploadProgress>=100&&(clearInterval(i),setTimeout(()=>{this.uploading=!1},1e3))},200)}}))});document.addEventListener("alpine:init",()=>{l.data("multiUploadHandler",()=>({dragging:!1,fileList:[],errorMessage:"",uploading:!1,uploadProgress:0,totalSize:0,maxFileCount:5,maxTotalSize:100*1024*1024,handleDrop(e){this.dragging=!1;const i=e.dataTransfer.files;this.processFileSelection(i)},handleFileSelect(e){const i=e.target.files;this.processFileSelection(i),e.target.value=""},processFileSelection(e){if(e.length===0)return;if(this.errorMessage="",this.fileList.length+e.length>this.maxFileCount){this.errorMessage=`Maksimum ${this.maxFileCount} file diperbolehkan. Anda mencoba menambahkan ${e.length} file lagi.`;return}let i=this.totalSize;for(let t=0;t<e.length;t++)i+=e[t].size;if(i>this.maxTotalSize){this.errorMessage=`Total ukuran file melebihi batas 100MB. Saat ini: ${this.formatSize(i)}`;return}for(let t=0;t<e.length;t++){const a=e[t];this.fileList.push(a),this.totalSize+=a.size}},removeFile(e){this.totalSize-=this.fileList[e].size,this.fileList.splice(e,1)},clearAllFiles(){this.fileList=[],this.totalSize=0},formatSize(e){if(e===0)return"0 Bytes";const i=1024,t=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(i));return parseFloat((e/Math.pow(i,a)).toFixed(2))+" "+t[a]},uploadFiles(){if(this.fileList.length===0){this.errorMessage="Tidak ada file yang dipilih untuk diupload.";return}this.uploading=!0,this.uploadProgress=0;const e=new FormData;this.fileList.forEach((t,a)=>{e.append(`file${a}`,t)});let i=setInterval(()=>{this.uploadProgress+=5,this.uploadProgress>=100&&(clearInterval(i),setTimeout(()=>{this.uploading=!1,alert("Semua file berhasil diupload!"),this.clearAllFiles()},1e3))},200)}}))});
